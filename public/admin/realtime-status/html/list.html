<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>가게 목록 - 관리자</title>
    
    <link rel="stylesheet" href="../../../css/common.css">
    <link rel="stylesheet" href="../css/list.css">
</head>
<body>
    <!-- 메인 헤더 포함 -->
    <div id="header-container"></div>
    
    <div class="admin-container">
        <div class="admin-header">
            <h1>실시간 현황판 - 가게 목록</h1>
            <div class="header-actions">
                <a href="add.html" class="add-btn">+ 가게 추가</a>
                <a href="../../dashboard.html" class="back-btn">← 관리자 대시보드로</a>
            </div>
        </div>
        
        <div class="filter-section">
            <input type="text" id="searchInput" placeholder="가게명, 지역으로 검색" class="search-input">
            <select id="statusFilter" class="filter-select">
                <option value="">전체 상태</option>
                <option value="green">초록 (여유)</option>
                <option value="orange">주황 (보통)</option>
                <option value="red">빨강 (혼잡)</option>
            </select>
            <select id="businessTypeFilter" class="filter-select">
                <option value="">전체 업종</option>
                <option value="퍼블릭">퍼블릭</option>
                <option value="바">바</option>
                <option value="레깅스룸">레깅스룸</option>
                <option value="셔츠룸">셔츠룸</option>
                <option value="일프로">일프로</option>
                <option value="쩜오">쩜오</option>
                <option value="클럽">클럽</option>
                <option value="텐카페">텐카페</option>
                <option value="텐프로">텐프로</option>
                <option value="하이퍼블릭">하이퍼블릭</option>
                <option value="호빠">호빠</option>
            </select>
        </div>
        
        <div class="list-container">
            <table class="store-table">
                <thead>
                    <tr>
                        <th>가게명</th>
                        <th>지역</th>
                        <th>업종</th>
                        <th>상태</th>
                        <th>영업</th>
                        <th>방/인원/대기</th>
                        <th>등록일</th>
                        <th>관리</th>
                    </tr>
                </thead>
                <tbody id="storeList">
                    <!-- 데이터가 여기에 동적으로 추가됩니다 -->
                </tbody>
            </table>
            
            <div id="noDataMessage" class="no-data" style="display: none;">
                등록된 가게가 없습니다.
            </div>
        </div>
    </div>

    <script type="module" src="../../../js/firebase-config.js"></script>
    <script type="module" src="../js/list.js"></script>
    <script>
        // 헤더 로드
        fetch('/header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header-container').innerHTML = data;
                
                // 헤더 내의 스크립트 실행
                const container = document.getElementById('header-container');
                const scripts = container.querySelectorAll('script');
                
                scripts.forEach(oldScript => {
                    const newScript = document.createElement('script');
                    newScript.type = oldScript.type || 'text/javascript';
                    
                    if (oldScript.src) {
                        newScript.src = oldScript.src;
                    } else {
                        newScript.textContent = oldScript.textContent;
                    }
                    
                    oldScript.parentNode.replaceChild(newScript, oldScript);
                });
            })
            .catch(error => console.error('헤더 로딩 오류:', error));
    </script>
</body>
</html>