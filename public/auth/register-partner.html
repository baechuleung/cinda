<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>파트너 가입</title>
    
    <!-- SEO 태그는 seo-manager.js가 동적으로 삽입 -->
    <script type="module" src="/js/seo-manager.js"></script>
    
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/auth/css/register-partner.css">
</head>
<body>
    <!-- 헤더 -->
    <header>
        <nav>
            <button class="back-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 18L9 12L15 6" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <h1 class="page-title">파트너 가입</h1>
        </nav>
    </header>

    <div class="register-container">
        <div class="register-form">
            <form id="registerForm">
                <!-- 이메일 -->
                <div class="form-group">
                    <label for="email">이메일 <span class="required">*</span></label>
                    <div class="input-with-dropdown">
                        <input type="text" id="emailId" placeholder="이메일 아이디" required>
                        <span class="at-symbol">@</span>
                        <div class="custom-dropdown email-domain-dropdown">
                            <div class="dropdown-selected" id="emailDropdownSelected">
                                <span class="selected-text">도메인 선택</span>
                                <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                                    <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <div class="dropdown-menu" id="emailDropdownMenu" style="display: none;">
                                <div class="dropdown-options" id="emailDropdownOptions">
                                    <div class="dropdown-option" data-value="">도메인 선택</div>
                                    <div class="dropdown-option" data-value="naver.com">naver.com</div>
                                    <div class="dropdown-option" data-value="gmail.com">gmail.com</div>
                                    <div class="dropdown-option" data-value="daum.net">daum.net</div>
                                    <div class="dropdown-option" data-value="hanmail.net">hanmail.net</div>
                                    <div class="dropdown-option" data-value="nate.com">nate.com</div>
                                    <div class="dropdown-option" data-value="kakao.com">kakao.com</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="email" name="email" required>
                    <div class="helper-text">* 비밀번호 분실 시, 임시비밀번호를 받을 수 있는 이메일을 입력해주세요.</div>
                </div>

                <!-- 비밀번호 -->
                <div class="form-group">
                    <label for="password">비밀번호 <span class="required">*</span></label>
                    <div class="password-input">
                        <input type="password" id="password" placeholder="영문, 숫자, 특수문자가 들어간 8~20자" autocomplete="new-password" required>
                        <span class="show-password" onclick="togglePassword()">
                            <svg class="eye-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5Z" stroke="#999" stroke-width="1.5"/>
                                <path d="M2.08325 10C3.33325 5.83333 6.41659 3.33333 9.99992 3.33333C13.5833 3.33333 16.6666 5.83333 17.9166 10C16.6666 14.1667 13.5833 16.6667 9.99992 16.6667C6.41659 16.6667 3.33325 14.1667 2.08325 10Z" stroke="#999" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <svg class="eye-off-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" style="display: none;">
                                <path d="M15.0002 15.8333L5.00016 4.16666" stroke="#999" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M11.9168 11.6083C11.6026 12.1051 11.1501 12.5004 10.6118 12.7477C10.0736 12.9951 9.47183 13.0834 8.88023 12.9946C8.28863 12.9057 7.73201 12.6436 7.27562 12.2369C6.81923 11.8302 6.48239 11.2949 6.30496 10.6901" stroke="#999" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </span>
                    </div>
                    <div class="helper-text">영문, 숫자, 특수문자가 모두 들어간 8~20자</div>
                </div>

                <!-- 비밀번호 확인 -->
                <div class="form-group">
                    <label for="confirmPassword">비밀번호 확인</label>
                    <input type="password" id="confirmPassword" placeholder="비밀번호 확인을 위해 한번 더 입력해 주세요" autocomplete="new-password" required>
                </div>

                <!-- 업체명 -->
                <div class="form-group">
                    <label for="companyName">업체명 <span class="required">*</span></label>
                    <input type="text" id="companyName" placeholder="제휴업체명을 입력해주세요" required>
                </div>

                <!-- 사업자등록번호 -->
                <div class="form-group">
                    <label for="businessNumber">사업자등록번호 <span class="required">*</span></label>
                    <input type="text" id="businessNumber" placeholder="사업자등록번호 10자리 입력" maxlength="10" required>
                    <div class="helper-text">'-' 없이 숫자만 입력해주세요</div>
                </div>

                <!-- 업종 선택 -->
                <div class="form-group">
                    <label for="partnerCategory">업종 선택 <span class="required">*</span></label>
                    <div class="custom-dropdown">
                        <div class="dropdown-selected" id="categoryDropdownSelected">
                            <span class="selected-text">업종을 선택해주세요</span>
                            <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                                <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="dropdown-menu" id="categoryDropdownMenu" style="display: none;">
                            <div class="dropdown-options" id="categoryDropdownOptions">
                                <div class="dropdown-option" data-value="">업종을 선택해주세요</div>
                                <div class="dropdown-option" data-value="음식점">음식점</div>
                                <div class="dropdown-option" data-value="카페">카페</div>
                                <div class="dropdown-option" data-value="미용/뷰티">미용/뷰티</div>
                                <div class="dropdown-option" data-value="운동/헬스">운동/헬스</div>
                                <div class="dropdown-option" data-value="교육/학원">교육/학원</div>
                                <div class="dropdown-option" data-value="쇼핑/소매">쇼핑/소매</div>
                                <div class="dropdown-option" data-value="서비스업">서비스업</div>
                                <div class="dropdown-option" data-value="기타">기타</div>
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="partnerCategory" name="partnerCategory" required>
                </div>

                <!-- 숨겨진 필드들 (DB 저장용) -->
                <input type="hidden" id="managerName" value="홍길동">
                <input type="hidden" id="birthdate" value="1999년 02월 12일">
                <input type="hidden" id="phone" value="010-1234-5678">

                <!-- 전체동의 -->
                <div class="section-title">
                    <input type="checkbox" id="allAgree" onclick="toggleAllCheckboxes()">
                    <label for="allAgree">전체동의</label>
                </div>
                <div class="terms-group">
                    <div class="term-item">
                        <div class="term-left">
                            <input type="checkbox" id="terms1" class="term-checkbox" required>
                            <label for="terms1">이용약관 동의 <span class="required">*</span></label>
                        </div>
                        <button type="button" class="view-btn" onclick="showTermsPopup('terms-of-service')">전문보기</button>
                    </div>
                    <div class="term-item">
                        <div class="term-left">
                            <input type="checkbox" id="terms2" class="term-checkbox" required>
                            <label for="terms2">개인정보 수집 및 이용 동의 <span class="required">*</span></label>
                        </div>
                        <button type="button" class="view-btn" onclick="showTermsPopup('privacy-policy')">전문보기</button>
                    </div>
                    <div class="term-item">
                        <div class="term-left">
                            <input type="checkbox" id="terms3" class="term-checkbox" required>
                            <label for="terms3">제휴업체 약관 동의 <span class="required">*</span></label>
                        </div>
                        <button type="button" class="view-btn" onclick="showTermsPopup('partner-agreement')">전문보기</button>
                    </div>
                    <div class="term-item">
                        <div class="term-left">
                            <input type="checkbox" id="terms4" class="term-checkbox">
                            <label for="terms4">마케팅 정보 이용 및 수신동의 <span class="optional">(선택)</span></label>
                        </div>
                        <button type="button" class="view-btn" onclick="showTermsPopup('marketing-agreement')">전문보기</button>
                    </div>
                </div>

                <button type="submit" class="submit-btn">회원가입</button>
            </form>
            <div id="error-message" class="error-message"></div>
        </div>
    </div>

    <!-- 약관 모달 -->
    <div id="termsModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeTermsModal()">&times;</span>
            <iframe id="termsFrame" src="" frameborder="0"></iframe>
        </div>
    </div>

    <script type="module" src="/js/firebase-config.js"></script>
    <script type="module" src="/auth/js/register-partner.js"></script>
    <script>
        // 뒤로가기 버튼 기능
        document.querySelector('.back-button').addEventListener('click', function() {
            history.back();
        });

        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirmPassword');
            const eyeIcon = document.querySelector('.eye-icon');
            const eyeOffIcon = document.querySelector('.eye-off-icon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                confirmPasswordInput.type = 'text';
                eyeIcon.style.display = 'none';
                eyeOffIcon.style.display = 'block';
            } else {
                passwordInput.type = 'password';
                confirmPasswordInput.type = 'password';
                eyeIcon.style.display = 'block';
                eyeOffIcon.style.display = 'none';
            }
        }

        function showTermsPopup(termsType) {
            const modal = document.getElementById('termsModal');
            const frame = document.getElementById('termsFrame');
            frame.src = `/terms/${termsType}.html`;
            modal.style.display = 'block';
        }

        function closeTermsModal() {
            const modal = document.getElementById('termsModal');
            const frame = document.getElementById('termsFrame');
            modal.style.display = 'none';
            frame.src = '';
        }

        function toggleAllCheckboxes() {
            const allAgree = document.getElementById('allAgree');
            const checkboxes = document.querySelectorAll('.term-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.checked = allAgree.checked;
            });
        }

        // 모달 외부 클릭 시 닫기
        window.onclick = function(event) {
            const modal = document.getElementById('termsModal');
            if (event.target === modal) {
                closeTermsModal();
            }
        }
    </script>
</body>
</html>